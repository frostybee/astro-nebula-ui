---
interface Props {
  type?: "info" | "note" | "danger" | "success" | "warning" | "tip";
  title?: string;
}
const { type = "info", title } = Astro.props;

// SVG icons for each type.
const icons = {
  info: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"></circle>
    <path d="M12 16v-4"></path>
    <path d="M12 8h.01"></path>
  </svg>`,

  note: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 8v4"></path>
    <path d="M12 16h.01"></path>
    <path d="M6.4 20a9 9 0 1 1 11.2 0Z"></path>
  </svg>`,

  danger: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="m19 5-14 14"></path>
    <path d="m5 5 14 14"></path>
  </svg>`,

  success: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20 6 9 17l-5-5"></path>
  </svg>`,

  warning: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
    <path d="M12 9v4"></path>
    <path d="M12 17h.01"></path>
  </svg>`,

  tip: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 2v8"></path>
    <path d="m4.93 10.93 1.41 1.41"></path>
    <path d="M2 18h2"></path>
    <path d="M20 18h2"></path>
    <path d="m19.07 10.93-1.41 1.41"></path>
    <path d="M22 22H2"></path>
    <path d="M16 6 8 14"></path>
  </svg>`,
};
---

<div class={`callout callout-${type} ${!title ? "callout-no-title" : ""}`}>
  <div class="callout-header">
    <div class="callout-icon" set:html={icons[type]} />
    {title && <div class="callout-title">{title}</div>}
  </div>
  <div class="callout-content">
    <slot />
  </div>
</div>

<style>
  /* CSS Variables for callout colors */
  .callout {
    --callout-text-color: #ffffff;
    --callout-border-color: #ffffff;
  }

  /* Light theme variables */
  .callout-info {
    --callout-text-color: #1e40af;
    --callout-border-color: #2563eb;
  }
  .callout-note {
    --callout-text-color: #7c3aed;
    --callout-border-color: #9333ea;
  }
  .callout-danger {
    --callout-text-color: #dc2626;
    --callout-border-color: #dc2626;
  }
  .callout-success {
    --callout-text-color: #16a34a;
    --callout-border-color: #16a34a;
  }
  .callout-warning {
    --callout-text-color: #d97706;
    --callout-border-color: #d97706;
  }
  .callout-tip {
    --callout-text-color: #0f766e;
    --callout-border-color: #0d9488;
  }

  /* Dark theme variables */
  [data-theme="dark"] .callout,
  :root[data-theme="dark"] .callout,
  html[data-theme="dark"] .callout,
  .theme-dark .callout {
    --callout-text-color: #ffffff;
  }

  [data-theme="dark"] .callout-info,
  :root[data-theme="dark"] .callout-info,
  html[data-theme="dark"] .callout-info,
  .theme-dark .callout-info {
    --callout-border-color: #60a5fa;
  }

  [data-theme="dark"] .callout-note,
  :root[data-theme="dark"] .callout-note,
  html[data-theme="dark"] .callout-note,
  .theme-dark .callout-note {
    --callout-border-color: #c084fc;
  }

  [data-theme="dark"] .callout-danger,
  :root[data-theme="dark"] .callout-danger,
  html[data-theme="dark"] .callout-danger,
  .theme-dark .callout-danger {
    --callout-border-color: #f87171;
  }

  [data-theme="dark"] .callout-success,
  :root[data-theme="dark"] .callout-success,
  html[data-theme="dark"] .callout-success,
  .theme-dark .callout-success {
    --callout-border-color: #4ade80;
  }

  [data-theme="dark"] .callout-warning,
  :root[data-theme="dark"] .callout-warning,
  html[data-theme="dark"] .callout-warning,
  .theme-dark .callout-warning {
    --callout-border-color: #f59e0b;
  }

  [data-theme="dark"] .callout-tip,
  :root[data-theme="dark"] .callout-tip,
  html[data-theme="dark"] .callout-tip,
  .theme-dark .callout-tip {
    --callout-border-color: #2dd4bf;
  }

  @media (prefers-color-scheme: dark) {
    .callout {
      --callout-text-color: #ffffff;
    }
    .callout-info {
      --callout-border-color: #60a5fa;
    }
    .callout-note {
      --callout-border-color: #c084fc;
    }
    .callout-danger {
      --callout-border-color: #f87171;
    }
    .callout-success {
      --callout-border-color: #4ade80;
    }
    .callout-warning {
      --callout-border-color: #f59e0b;
    }
    .callout-tip {
      --callout-border-color: #2dd4bf;
    }
  }

  .callout {
    display: flex;
    flex-direction: column;
    margin-bottom: 1.5rem;
    border-radius: 8px;
    padding: 0.5rem;
    font-size: 1rem;
    line-height: 1.4;
    position: relative;
    border: 1px solid transparent;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  .callout::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--callout-border-color);
    opacity: 0.8;
  }

  .callout:hover {
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  .callout-header {
    display: flex;
    align-items: center;
    margin-bottom: 0.25rem;
    gap: 0.375rem;
  }

  .callout-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
  }

  .callout-icon svg {
    width: 20px;
    height: 20px;
    opacity: 1;
  }

  .callout-icon :global(svg) {
    width: 20px;
    height: 20px;
    opacity: 1;
  }

  .callout-title {
    font-weight: 600;
    font-size: 1rem;
    margin: 0;
    color: currentColor;
    opacity: 0.9;
  }

  .callout-content {
    flex: 1;
    margin-top: 0;
    margin-left: calc(32px + 0.375rem);
    text-align: justify;
  }

  /* Info callout */
  .callout-info {
    background: linear-gradient(
      135deg,
      rgba(59, 130, 246, 0.05) 0%,
      rgba(147, 197, 253, 0.08) 100%
    );
    border-color: rgba(59, 130, 246, 0.15);
    color: var(--callout-text-color);
  }
  .callout-info .callout-icon {
    background: rgba(59, 130, 246, 0.1);
  }
  .callout-info .callout-icon svg,
  .callout-info .callout-icon :global(svg) {
    color: #2563eb;
    stroke: #2563eb;
  }

  /* Note callout */
  .callout-note {
    background: linear-gradient(
      135deg,
      rgba(168, 85, 247, 0.05) 0%,
      rgba(196, 132, 252, 0.08) 100%
    );
    border-color: rgba(168, 85, 247, 0.15);
    color: var(--callout-text-color);
  }
  .callout-note .callout-icon {
    background: rgba(168, 85, 247, 0.1);
  }
  .callout-note .callout-icon svg,
  .callout-note .callout-icon :global(svg) {
    color: #9333ea;
    stroke: #9333ea;
  }

  /* Danger callout */
  .callout-danger {
    background: linear-gradient(
      135deg,
      rgba(239, 68, 68, 0.05) 0%,
      rgba(248, 113, 113, 0.08) 100%
    );
    border-color: rgba(239, 68, 68, 0.15);
    color: var(--callout-text-color);
  }
  .callout-danger .callout-icon {
    background: rgba(239, 68, 68, 0.1);
  }
  .callout-danger .callout-icon svg,
  .callout-danger .callout-icon :global(svg) {
    color: #dc2626;
    stroke: #dc2626;
  }

  /* Success callout */
  .callout-success {
    background: linear-gradient(
      135deg,
      rgba(34, 197, 94, 0.05) 0%,
      rgba(74, 222, 128, 0.08) 100%
    );
    border-color: rgba(34, 197, 94, 0.15);
    color: var(--callout-text-color);
  }
  .callout-success .callout-icon {
    background: rgba(34, 197, 94, 0.1);
  }
  .callout-success .callout-icon svg,
  .callout-success .callout-icon :global(svg) {
    color: #16a34a;
    stroke: #16a34a;
  }

  /* Warning callout */
  .callout-warning {
    background: linear-gradient(
      135deg,
      rgba(245, 158, 11, 0.05) 0%,
      rgba(251, 191, 36, 0.08) 100%
    );
    border-color: rgba(245, 158, 11, 0.15);
    color: var(--callout-text-color);
  }
  .callout-warning .callout-icon {
    background: rgba(245, 158, 11, 0.1);
  }
  .callout-warning .callout-icon svg,
  .callout-warning .callout-icon :global(svg) {
    color: #d97706;
    stroke: #d97706;
  }

  /* Tip callout */
  .callout-tip {
    background: linear-gradient(
      135deg,
      rgba(20, 184, 166, 0.05) 0%,
      rgba(45, 212, 191, 0.08) 100%
    );
    border-color: rgba(20, 184, 166, 0.15);
    color: var(--callout-text-color);
  }
  .callout-tip .callout-icon {
    background: rgba(20, 184, 166, 0.1);
  }
  .callout-tip .callout-icon svg,
  .callout-tip .callout-icon :global(svg) {
    color: #0d9488;
    stroke: #0d9488;
  }

  /* Dark mode */
  @media (prefers-color-scheme: dark) {
    .callout {
      box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.3),
        0 2px 4px -1px rgba(0, 0, 0, 0.2);
    }

    .callout:hover {
      box-shadow:
        0 10px 15px -3px rgba(0, 0, 0, 0.3),
        0 4px 6px -2px rgba(0, 0, 0, 0.2);
    }

    .callout-icon {
      background: rgba(255, 255, 255, 0.05);
    }

    .callout-info {
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.08) 0%,
        rgba(147, 197, 253, 0.12) 100%
      );
      border-color: rgba(59, 130, 246, 0.25);
    }
    .callout-info .callout-icon {
      background: rgba(59, 130, 246, 0.15);
    }
    .callout-info .callout-icon svg,
    .callout-info .callout-icon :global(svg) {
      color: #60a5fa;
      stroke: #60a5fa;
    }

    .callout-note {
      background: linear-gradient(
        135deg,
        rgba(168, 85, 247, 0.08) 0%,
        rgba(196, 132, 252, 0.12) 100%
      );
      border-color: rgba(168, 85, 247, 0.25);
    }
    .callout-note .callout-icon {
      background: rgba(168, 85, 247, 0.15);
    }
    .callout-note .callout-icon svg,
    .callout-note .callout-icon :global(svg) {
      color: #c084fc;
      stroke: #c084fc;
    }

    .callout-danger {
      background: linear-gradient(
        135deg,
        rgba(239, 68, 68, 0.08) 0%,
        rgba(248, 113, 113, 0.12) 100%
      );
      border-color: rgba(239, 68, 68, 0.25);
    }
    .callout-danger .callout-icon {
      background: rgba(239, 68, 68, 0.15);
    }
    .callout-danger .callout-icon svg,
    .callout-danger .callout-icon :global(svg) {
      color: #f87171;
      stroke: #f87171;
    }

    .callout-success {
      background: linear-gradient(
        135deg,
        rgba(34, 197, 94, 0.08) 0%,
        rgba(74, 222, 128, 0.12) 100%
      );
      border-color: rgba(34, 197, 94, 0.25);
    }
    .callout-success .callout-icon {
      background: rgba(34, 197, 94, 0.15);
    }
    .callout-success .callout-icon svg,
    .callout-success .callout-icon :global(svg) {
      color: #4ade80;
      stroke: #4ade80;
    }

    .callout-warning {
      background: linear-gradient(
        135deg,
        rgba(245, 158, 11, 0.08) 0%,
        rgba(251, 191, 36, 0.12) 100%
      );
      border-color: rgba(245, 158, 11, 0.25);
    }
    .callout-warning .callout-icon {
      background: rgba(245, 158, 11, 0.15);
    }
    .callout-warning .callout-icon svg,
    .callout-warning .callout-icon :global(svg) {
      color: #f59e0b;
      stroke: #f59e0b;
    }

    .callout-tip {
      background: linear-gradient(
        135deg,
        rgba(20, 184, 166, 0.08) 0%,
        rgba(45, 212, 191, 0.12) 100%
      );
      border-color: rgba(20, 184, 166, 0.25);
    }
    .callout-tip .callout-icon {
      background: rgba(20, 184, 166, 0.15);
    }
    .callout-tip .callout-icon svg,
    .callout-tip .callout-icon :global(svg) {
      color: #2dd4bf;
      stroke: #2dd4bf;
    }
  }

  /* Content styling */
  .callout-content {
    opacity: 0.9;
    color: var(--callout-text-color);
  }

  /* Layout for callouts without titles - horizontal alignment */
  .callout-no-title {
    flex-direction: row;
    align-items: flex-start;
    padding: 0.75rem;
  }

  .callout-no-title .callout-header {
    margin-bottom: 0;
    margin-right: 0.75rem;
    flex-shrink: 0;
  }

  .callout-no-title .callout-content {
    flex: 1;
    margin-top: 0.25rem; /* Slight adjustment to align with icon center */
    margin-left: 0; /* Reset margin-left for horizontal layout */
  }

  /* Global slot styling */
  :global(.callout-content a) {
    color: inherit;
    text-decoration: underline;
    text-underline-offset: 2px;
    font-weight: 500;
    transition: opacity 0.2s ease;
  }

  :global(.callout-content a:hover) {
    opacity: 0.8;
  }

  :global(.callout-content p) {
    margin: 0.5rem 0;
  }

  :global(.callout-content p:first-child) {
    margin-top: 0;
  }

  :global(.callout-content p:last-child) {
    margin-bottom: 0;
  }

  :global(.callout-content strong) {
    font-weight: 600;
  }

  :global(.callout-content code) {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas,
      "Liberation Mono", "Courier New", monospace;
    font-size: 0.875em;
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    background: rgba(0, 0, 0, 0.05);
  }
</style>

